# ============================================================
# PortAct – Environment Variable Reference
# Copy this file to .env and fill in real values.
# Never commit .env to version control.
# ============================================================

# Application
APP_NAME=PortAct
APP_VERSION=1.0.0
DEBUG=False
ENVIRONMENT=production   # development | staging | production

# Server
HOST=0.0.0.0
PORT=8000

# Database (required)
DATABASE_URL=postgresql://portact_user:portact_password@localhost:5432/portact_db
DB_ECHO=False

# Security (required)
# Generate a strong key: openssl rand -hex 32
SECRET_KEY=your-secret-key-change-this-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# CORS
# Comma-separated list of allowed frontend origins.
BACKEND_CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# File Upload
MAX_UPLOAD_SIZE=10485760  # 10 MB in bytes
UPLOAD_DIR=./uploads
ALLOWED_EXTENSIONS=.pdf,.csv,.xlsx,.xls,.doc,.docx

# ── AI / News ──────────────────────────────────────────────
# Provider: "openai" (default) or "grok"
AI_NEWS_PROVIDER=openai
OPENAI_API_KEY=your-openai-api-key
GROK_API_KEY=your-grok-api-key

# AI API endpoints (override for proxies or staging mirrors)
OPENAI_API_ENDPOINT=https://api.openai.com/v1/chat/completions
GROK_API_ENDPOINT=https://api.x.ai/v1/chat/completions

# AI model selection
OPENAI_MODEL=gpt-3.5-turbo
GROK_MODEL=grok-beta

# AI request tuning
AI_REQUEST_DELAY=2.0       # seconds to wait between successive AI calls
AI_REQUEST_TIMEOUT=30      # HTTP timeout per AI call (seconds)
AI_MAX_RETRIES=3
AI_RETRY_DELAY=5.0         # base retry back-off (multiplied by attempt number)
AI_MAX_TOKENS=800
AI_TEMPERATURE=0.3

# ── External Market APIs ───────────────────────────────────
ALPHA_VANTAGE_API_KEY=your-alpha-vantage-key
COINGECKO_API_BASE=https://api.coingecko.com/api/v3
NSE_API_BASE=https://www.nseindia.com/api
AMFI_NAV_URL=https://www.amfiindia.com/spages/NAVAll.txt
GOLD_PRICE_API=https://api.metals.live/v1/spot/gold
EXCHANGE_RATE_API=https://api.exchangerate-api.com/v4/latest/USD
EXCHANGE_RATE_FALLBACK_API=https://open.er-api.com/v6/latest/USD
YAHOO_FINANCE_API=https://query1.finance.yahoo.com/v8/finance/chart
FMP_API_BASE=https://financialmodelingprep.com/api/v3
FMP_API_KEY=demo

# API Timeouts (seconds)
API_TIMEOUT=10
API_TIMEOUT_SHORT=5

# ── Schedulers ─────────────────────────────────────────────
PRICE_UPDATE_INTERVAL_MINUTES=30

# EOD snapshot: UTC time (13:30 UTC = 7:00 PM IST)
EOD_SNAPSHOT_HOUR=13
EOD_SNAPSHOT_MINUTE=30

# News fetch: IST hours (24-h format)
NEWS_MORNING_HOUR=9
NEWS_EVENING_HOUR=18
NEWS_LIMIT_PER_USER=10   # max assets processed per user per scheduled run

# ── Redis ──────────────────────────────────────────────────
REDIS_URL=redis://localhost:6379/0

# ── Email / SMTP ───────────────────────────────────────────
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
EMAILS_FROM_EMAIL=noreply@portact.com
EMAILS_FROM_NAME=PortAct

# ── Logging ────────────────────────────────────────────────
LOG_LEVEL=INFO       # DEBUG | INFO | WARNING | ERROR | CRITICAL
LOG_FILE=logs/app.log

# ── Password Reset ─────────────────────────────────────────
# URL of the frontend app — used to build the in-app reset link shown to the user
FRONTEND_URL=http://localhost:3000
PASSWORD_RESET_TOKEN_EXPIRE_MINUTES=30

# ── MinIO (S3-compatible object storage) ───────────────────
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=portact-statements
MINIO_SECURE=False

# ── AWS S3 (production — replaces MinIO) ──────────────────
# When running on EC2 with an IAM role, leave keys blank.
AWS_S3_BUCKET=
AWS_S3_REGION=ap-south-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# ── Monthly PF/Gratuity Contribution Scheduler ────────────
MONTHLY_CONTRIBUTION_DAY=1
MONTHLY_CONTRIBUTION_HOUR=0
MONTHLY_CONTRIBUTION_MINUTE=30
